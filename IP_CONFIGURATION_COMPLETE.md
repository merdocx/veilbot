# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è IP –∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è veil-bot.ru - –ó–∞–≤–µ—Ä—à–µ–Ω–æ

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–ª–µ–Ω IP 212.118.52.195 –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**–§–∞–π–ª:** `/etc/netplan/01-netcfg.yaml`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```yaml
addresses: [ "77.246.105.29/24", "46.151.31.105/32", "212.118.52.195/32" ]
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–æ:**
```bash
sudo netplan apply
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω server block –¥–ª—è IP 212.118.52.195 –≤ nginx

**–§–∞–π–ª:** `/root/veilbot/nginx/veil-bot.ru`

**–î–æ–±–∞–≤–ª–µ–Ω –±–ª–æ–∫:**
```nginx
# –î–æ—Å—Ç—É–ø –ø–æ IP 212.118.52.195 (HTTP)
server {
    listen 80;
    listen [::]:80;
    server_name 212.118.52.195;

    access_log /var/log/nginx/212.118.52.195.access.log;
    error_log /var/log/nginx/212.118.52.195.error.log;

    location / {
        proxy_pass http://127.0.0.1:8001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
        proxy_buffering on;
        proxy_buffer_size 4k;
        proxy_buffers 8 4k;
    }

    location /static/ {
        alias /root/veilbot/admin/static/;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
}
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–æ:**
```bash
sudo nginx -t
sudo systemctl reload nginx
```

## üìä –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### IP –∞–¥—Ä–µ—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
- ‚úÖ **77.246.105.29/24** - –æ—Å–Ω–æ–≤–Ω–æ–π IP
- ‚úÖ **46.151.31.105/32** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π IP
- ‚úÖ **212.118.52.195/32** - IP –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ (–Ω–æ–≤—ã–π)

### DNS –∑–∞–ø–∏—Å–∏ –¥–æ–º–µ–Ω–∞ veil-bot.ru:
```
A @ ‚Üí 212.118.52.195 ‚úÖ
A @ ‚Üí 46.151.31.105 ‚úÖ
A www ‚Üí 212.118.52.195 ‚úÖ
A www ‚Üí 46.151.31.105 ‚úÖ
```

### Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- ‚úÖ –°–ª—É—à–∞–µ—Ç –Ω–∞ `0.0.0.0:80` –∏ `0.0.0.0:443` (–≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –¥–æ–º–µ–Ω–∞ `veil-bot.ru` –∏ `www.veil-bot.ru`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è IP `46.151.31.105` (HTTP)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è IP `212.118.52.195` (HTTP)

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ IP:
- ‚úÖ `http://46.151.31.105` - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ `http://212.118.52.195` - —Ä–∞–±–æ—Ç–∞–µ—Ç (HTTP 200 OK)

### –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ –¥–æ–º–µ–Ω—É:
- ‚úÖ `https://veil-bot.ru` - —Ä–∞–±–æ—Ç–∞–µ—Ç (—á–µ—Ä–µ–∑ –ª—é–±–æ–π –∏–∑ IP)
- ‚úÖ `https://www.veil-bot.ru` - —Ä–∞–±–æ—Ç–∞–µ—Ç (—á–µ—Ä–µ–∑ –ª—é–±–æ–π –∏–∑ IP)

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–°–∞–π—Ç veil-bot.ru —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Ç—Ä–µ–º IP –∞–¥—Ä–µ—Å–∞–º:**
1. `77.246.105.29` - –æ—Å–Ω–æ–≤–Ω–æ–π IP
2. `46.151.31.105` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π IP
3. `212.118.52.195` - IP –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ï—Å–ª–∏ –æ–¥–∏–Ω IP –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π
- ‚úÖ DNS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –º–µ–∂–¥—É IP –∞–¥—Ä–µ—Å–∞–º–∏
- ‚úÖ –í—Å–µ IP –∞–¥—Ä–µ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üìù –õ–æ–≥–∏

**–û—Ç–¥–µ–ª—å–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ IP:**
- `/var/log/nginx/46.151.31.105.access.log`
- `/var/log/nginx/212.118.52.195.access.log`
- `/var/log/nginx/veil-bot.ru.access.log` (–¥–ª—è –¥–æ–º–µ–Ω–∞)

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å IP –∞–¥—Ä–µ—Å–∞:
```bash
ip addr show ens3 | grep "inet "
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:
```bash
curl -I http://212.118.52.195
curl -I http://46.151.31.105
curl -I https://veil-bot.ru
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS —Ä–µ–∑–æ–ª—é—Ü–∏—é:
```bash
dig veil-bot.ru +short
dig www.veil-bot.ru +short
```

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ó–∞–≤–µ—Ä—à–µ–Ω–æ

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã. –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –≤—Å–µ–º IP –∞–¥—Ä–µ—Å–∞–º, —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤ DNS –∑–∞–ø–∏—Å—è—Ö.
