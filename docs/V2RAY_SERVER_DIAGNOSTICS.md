# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ V2Ray —Å–µ—Ä–≤–µ—Ä–∞ - –ê–≤–≥—É—Å—Ç 2025

## üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API:
```bash
curl -k -X GET "https://veil-bird.ru/api/" -H "X-API-Key: QBDMqDzCRh17NIGUsKDtWtoUmvwRVvSHHp4W8OCMcOM="
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "message": "VPN Key Management API",
  "version": "1.0.0", 
  "status": "running"
}
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ API —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç

### 2. –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—é—á–∞:
```bash
curl -k -X POST "https://veil-bird.ru/api/keys" \
  -H "X-API-Key: QBDMqDzCRh17NIGUsKDtWtoUmvwRVvSHHp4W8OCMcOM=" \
  -H "Content-Type: application/json" \
  -d '{"name": "test_key_1"}'
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "detail": "Failed to restart Xray service"
}
```

**–°—Ç–∞—Ç—É—Å:** ‚ùå –û—à–∏–±–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–ª—é—á–µ–π:
```bash
curl -k -X GET "https://veil-bird.ru/api/keys" \
  -H "X-API-Key: QBDMqDzCRh17NIGUsKDtWtoUmvwRVvSHHp4W8OCMcOM="
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
[]
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –°–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–π –ø—É—Å—Ç (–æ–∂–∏–¥–∞–µ–º–æ)

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Xray:
```bash
curl -k -X GET "https://veil-bird.ru/api/system/xray/config-status" \
  -H "X-API-Key: QBDMqDzCRh17NIGUsKDtWtoUmvwRVvSHHp4W8OCMcOM="
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "config_status": {
    "total_inbounds": 1,
    "vless_inbounds": 0,
    "api_inbounds": 1,
    "port_assignments": {
      "used_ports": {},
      "port_assignments": {},
      "created_at": "2025-08-04T12:24:35.028840",
      "last_updated": "2025-08-04T13:28:47.275642"
    },
    "config_valid": true,
    "timestamp": "2025-08-04T13:28:57.238220"
  },
  "timestamp": 1754303337
}
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞, –Ω–æ –Ω–µ—Ç VLESS inbounds

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ—Ä—Ç–æ–≤:
```bash
curl -k -X GET "https://veil-bird.ru/api/system/ports" \
  -H "X-API-Key: QBDMqDzCRh17NIGUsKDtWtoUmvwRVvSHHp4W8OCMcOM="
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "port_assignments": {
    "used_ports": {},
    "port_assignments": {},
    "created_at": "2025-08-04T12:24:35.028840",
    "last_updated": "2025-08-04T13:28:47.275642"
  },
  "used_ports": 0,
  "available_ports": 21,
  "max_ports": 20,
  "port_range": "10001-10020",
  "timestamp": 1754303342
}
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ—Ä—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã (0 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∏–∑ 20)

### 6. –ü–æ–ø—ã—Ç–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```bash
curl -k -X POST "https://veil-bird.ru/api/system/xray/sync-config" \
  -H "X-API-Key: QBDMqDzCRh17NIGUsKDtWtoUmvwRVvSHHp4W8OCMcOM="
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "message": "Xray configuration synchronized successfully",
  "status": "synced",
  "timestamp": 1754303350
}
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞

### 7. –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—é—á–∞:
```bash
curl -k -X POST "https://veil-bird.ru/api/keys" \
  -H "X-API-Key: QBDMqDzCRh17NIGUsKDtWtoUmvwRVvSHHp4W8OCMcOM=" \
  -H "Content-Type: application/json" \
  -d '{"name": "test_key_2"}'
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "detail": "Failed to restart Xray service"
}
```

**–°—Ç–∞—Ç—É—Å:** ‚ùå –û—à–∏–±–∫–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è

## üö® –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:
- **"Failed to restart Xray service"** - Xray —Å–µ—Ä–≤–∏—Å –Ω–µ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è
- –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á

### 2. –ü—Ä–æ–±–ª–µ–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
- **vless_inbounds: 0** - –Ω–µ—Ç VLESS inbounds –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **total_inbounds: 1** - —Ç–æ–ª—å–∫–æ API inbound –∞–∫—Ç–∏–≤–µ–Ω
- **api_inbounds: 1** - —Ç–æ–ª—å–∫–æ API —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç

### 3. –ü—Ä–æ–±–ª–µ–º—ã –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞:
- Xray —Å–µ—Ä–≤–∏—Å –Ω–µ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è
- –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
- –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π Xray

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ Xray —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ veil-bird.ru
systemctl status xray
systemctl restart xray
journalctl -u xray -f
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Xray:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cat /usr/local/etc/xray/config.json

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
ls -la /usr/local/etc/xray/
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Xray:
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞
journalctl -u xray --since "1 hour ago"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫–∏
tail -f /var/log/xray/error.log
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–æ–≤:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–∏–µ –ø–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã
netstat -tlnp | grep :1000

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–ª—É—à–∞–µ—Ç –ª–∏ Xray
ss -tlnp | grep xray
```

## üìä –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
1. **–ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞** - Xray –Ω–µ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
2. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π** - –Ω–µ–≤–µ—Ä–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Xray
3. **–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Ä—Ç–∞–º–∏** - –ø–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
4. **–ü—Ä–æ–±–ª–µ–º—ã —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏** - –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏/–¥–∏—Å–∫–∞

### –¢—Ä–µ–±—É–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ Xray —Å–µ—Ä–≤–∏—Å–∞** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Xray** –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** Xray
4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Xray —Å–µ—Ä–≤–∏—Å** –≤—Ä—É—á–Ω—É—é
5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** –∫ —Ñ–∞–π–ª–∞–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞:** ‚úÖ V2Ray —Å–µ—Ä–≤–µ—Ä –Ω–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –∫–ª—é—á–∏ –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏ "Failed to restart Xray service"

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ V2Ray —Å–µ—Ä–≤–µ—Ä–∞, –∞ –Ω–µ –≤ –Ω–∞—à–µ–º –∫–æ–¥–µ

**–†–µ—à–µ–Ω–∏–µ:** –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Xray —Å–µ—Ä–≤–∏—Å–∞

**–°—Ç–∞—Ç—É—Å:** –ù–∞—à –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞

**–î–∞—Ç–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:** 4 –∞–≤–≥—É—Å—Ç–∞ 2025 