# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–µ—Ä–≤–µ—Ä–∞ Amsterdam 1

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä Amsterdam 1 —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å. –í –ª–æ–≥–∞—Ö –∞–¥–º–∏–Ω–∫–∏ –±—ã–ª–∞ –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:

```
EDIT_SERVER_FAILED, Details: ID: 9, Validation error: 1 validation error for ServerForm
domain
  Value error, Invalid domain format [type=value_error, input_value='None', input_type=str]
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
–ü—Ä–æ–±–ª–µ–º–∞ –∑–∞–∫–ª—é—á–∞–ª–∞—Å—å –≤ —Ç–æ–º, —á—Ç–æ –ø–æ–ª—è —Ñ–æ—Ä–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã, –ø—Ä–∏—Ö–æ–¥—è—Ç –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏ `"None"` –≤–º–µ—Å—Ç–æ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫. –í–∞–ª–∏–¥–∞—Ç–æ—Ä `ServerForm` –Ω–µ –º–æ–≥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç–∞–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ä–º—ã
–í —Ñ—É–Ω–∫—Ü–∏–∏ `edit_server` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –ø–æ–ª—è –ø—Ä–∏—Ö–æ–¥—è—Ç –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏ `"None"`:

```python
# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –ø–æ–ª—è –ø—Ä–∏—Ö–æ–¥—è—Ç –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏ "None"
if domain == "None":
    domain = ""
if api_key == "None":
    api_key = ""
if v2ray_path == "None":
    v2ray_path = "/v2ray"
```

### 2. –£–ª—É—á—à–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤
–û–±–Ω–æ–≤–ª–µ–Ω—ã –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π:

#### –í–∞–ª–∏–¥–∞—Ç–æ—Ä domain:
```python
@validator('domain')
def validate_domain(cls, v):
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ v –º–æ–∂–µ—Ç –±—ã—Ç—å "None" –∏–ª–∏ None
    if v in [None, "None", ""]:
        return ""
    if not re.match(r'^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$', v):
        raise ValueError('Invalid domain format')
    return v.strip()
```

#### –í–∞–ª–∏–¥–∞—Ç–æ—Ä api_key:
```python
@validator('api_key')
def validate_api_key(cls, v, values):
    # API key –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è V2Ray —Å–µ—Ä–≤–µ—Ä–æ–≤
    protocol = values.get('protocol', 'outline')
    if protocol == 'v2ray' and (not v or not v.strip() or v == "None"):
        raise ValueError("API key is required for V2Ray servers")
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ v –º–æ–∂–µ—Ç –±—ã—Ç—å "None"
    if v in [None, "None", ""]:
        return ""
    return v.strip()
```

#### –í–∞–ª–∏–¥–∞—Ç–æ—Ä v2ray_path:
```python
@validator('v2ray_path')
def validate_v2ray_path(cls, v):
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ v –º–æ–∂–µ—Ç –±—ã—Ç—å "None" –∏–ª–∏ None
    if v in [None, "None", ""]:
        return "/v2ray"
    if not v.startswith('/'):
        raise ValueError('V2Ray path must start with /')
    return v
```

### 3. –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ—Å—è –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞
–£–¥–∞–ª–µ–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –≤–∞–ª–∏–¥–∞—Ç–æ—Ä –¥–ª—è `v2ray_path`.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–°–æ–∑–¥–∞–Ω –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω —Ç–µ—Å—Ç `test_server_edit.py`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä–∏–ª:

- ‚úÖ Outline —Å–µ—Ä–≤–µ—Ä —Å –ø—É—Å—Ç—ã–º–∏ V2Ray –ø–æ–ª—è–º–∏
- ‚úÖ V2Ray —Å–µ—Ä–≤–µ—Ä —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏  
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–æ–∫–∏ "None"
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è API –∫–ª—é—á–∞ –¥–ª—è V2Ray

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç
- –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–µ—Ä–≤–µ—Ä–∞ Amsterdam 1 —Ä–µ—à–µ–Ω–∞
- –ê–¥–º–∏–Ω–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–∞ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
- –í—Å–µ —Ç–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
- –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å/–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä—ã

## üìã –ß—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Ç–µ–ø–µ—Ä—å
1. ‚úÖ –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä Amsterdam 1
2. ‚úÖ –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä Amsterdam 1  
3. ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–µ—Ä—ã
4. ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—É—Å—Ç—ã–µ –ø–æ–ª—è –≤ —Ñ–æ—Ä–º–∞—Ö

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–ï–®–ï–ù–û  
**–î–∞—Ç–∞**: $(date)  
**–í—Ä–µ–º—è —Ä–µ—à–µ–Ω–∏—è**: ~15 –º–∏–Ω—É—Ç
